#!/usr/bin/env ruby

require 'pathname'
require 'fileutils'

# add self to libpath
$:.unshift File.expand_path("../../lib", Pathname.new(__FILE__).realpath)

require "test_framework/controller.rb"
require 'test_framework/configuration'

config = Configuration.new()
FileUtils.mkdir_p(config.output_directory) unless File.exist?(config.output_directory)
controller = Controller.new(config)
controller.execute
controller.write_xml_report(config.output_directory + "/results.xml")
controller.write_junit_report(config.output_directory + "/junit.xml")